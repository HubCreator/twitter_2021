(this.webpackJsonptwitter=this.webpackJsonptwitter||[]).push([[0],{42:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var s=n(2),r=n.n(s),a=n(32),c=n.n(a),i=n(10),o=n(20),l=n(6),u=n(21);n(39),n(52),n(51);u.a.initializeApp({apiKey:"AIzaSyCMPS9hqqZ4gm89StbhiuRt4idi6nF7_yk",authDomain:"twitter-84904.firebaseapp.com",projectId:"twitter-84904",storageBucket:"twitter-84904.appspot.com",messagingSenderId:"959360460795",appId:"1:959360460795:web:9f9173bccb165f56568d5e"});var j=u.a,d=u.a.auth(),f=u.a.firestore(),b=u.a.storage(),m=n(8),h=n.n(m),p=n(15),O=(n(42),n(1)),x=function(){var e=Object(s.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(""),c=Object(i.a)(a,2),o=c[0],l=c[1],u=Object(s.useState)(""),j=Object(i.a)(u,2),f=j[0],b=j[1],m=Object(s.useState)(!0),x=Object(i.a)(m,2),_=x[0],g=x[1],w=function(e){var t=e.target,n=t.name,s=t.value;"email"===n?l(s):b(s)},v=function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!_){e.next=8;break}return e.next=5,d.createUserWithEmailAndPassword(o,f);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,d.signInWithEmailAndPassword(o,f);case 10:n=e.sent;case 11:console.log(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),r(e.t0.message);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("i",{className:"fab fa-twitter"}),Object(O.jsxs)("form",{onSubmit:v,className:"login-page__form",children:[Object(O.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,onChange:w}),Object(O.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,onChange:w}),Object(O.jsx)("input",{className:"login-page__form__submit",type:"submit",value:_?"Create Account":"Sign In"})]}),Object(O.jsx)("span",{className:"login-page__form__signin",onClick:function(){return g((function(e){return!e}))},children:_?"Sign In":"Create Account"}),Object(O.jsx)("div",{className:"login-page__error-msg",children:n}),Object(O.jsx)("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.15.3/css/all.css",integrity:"sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk",crossorigin:"anonymous"})]})},_=function(){var e=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?s=new j.auth.GoogleAuthProvider:"github"===n&&(s=new j.auth.GithubAuthProvider),e.next=4,d.signInWithPopup(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"social-login",children:[Object(O.jsxs)("button",{className:"social-login__button",onClick:e,name:"google",children:["Continue with Google",Object(O.jsx)("i",{class:"fab fa-google"})]}),Object(O.jsxs)("button",{className:"social-login__button",onClick:e,name:"github",children:["Continue with Github",Object(O.jsx)("i",{class:"fab fa-github"})]})]})},g=function(){return Object(O.jsxs)("div",{className:"login-page",children:[Object(O.jsx)(x,{}),Object(O.jsx)(_,{})]})},w=n(34),v=n(22),y=n(23),N=function(e){var t=e.tweetObj,n=e.isOwner,r=Object(s.useState)(!1),a=Object(i.a)(r,2),c=a[0],o=a[1],l=Object(s.useState)(t.text),u=Object(i.a)(l,2),j=u[0],d=u[1],m=function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure you want to delete this tweet??")){e.next=6;break}return e.next=4,f.doc("tweets/".concat(t.id)).delete();case 4:return e.next=6,b.refFromURL(t.fileStringUrl).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){return o((function(e){return!e}))},_=function(){var e=Object(p.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t,j),e.next=4,f.doc("tweets/".concat(t.id)).update({text:j});case 4:o(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{children:c?Object(O.jsxs)("form",{className:"home-screen__modify",onSubmit:_,children:[Object(O.jsx)("input",{id:"modify-tweet",type:"text",placeholder:"Edit your tweet",value:j,required:!0,onChange:function(e){var t=e.target.value;d(t)}}),Object(O.jsx)("span",{id:"modify-submit",onClick:_,children:"Update Tweet"}),Object(O.jsx)("span",{id:"modify-cancel",onClick:x,children:"Cancel"})]}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h5",{className:"home-screen__tweet-list__text",children:t.text}),Object(O.jsxs)("div",{className:"home-screen__tweet-list__contents",children:[t.fileStringUrl&&Object(O.jsx)("img",{className:"home-screen__tweet-list__contents__img",src:t.fileStringUrl,alt:"img",width:"50px",height:"50px"}),n&&Object(O.jsxs)("div",{className:"home-screen__tweet-list__contents__tools",children:[Object(O.jsx)(v.a,{id:"delete",icon:y.c,onClick:m}),Object(O.jsx)(v.a,{id:"modify",icon:y.a,onClick:x})]})]})]})})},k=n(54),S=function(e){var t=e.userObj,n=Object(s.useState)(""),r=Object(i.a)(n,2),a=r[0],c=r[1],o=Object(s.useState)(""),l=Object(i.a)(o,2),u=l[0],j=l[1],d=function(){var e=Object(p.a)(h.a.mark((function e(n){var s,r,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),s="",""===u){e.next=10;break}return r=b.ref().child("".concat(t.uid,"/").concat(Object(k.a)())),e.next=6,r.putString(u,"data_url");case 6:return i=e.sent,e.next=9,i.ref.getDownloadURL();case 9:s=e.sent;case 10:if(""===a){e.next=16;break}return o={text:a,createdAt:Date.now(),creatorId:t.uid,fileStringUrl:s},e.next=14,f.collection("tweets").add(o);case 14:c(""),j("");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{className:"home-screen__form",onSubmit:d,children:[Object(O.jsxs)("div",{className:"home-screen__form__first-row",children:[Object(O.jsx)("input",{className:"home-screen__form__first-row__tweet",name:a,value:a,onChange:function(e){var t=e.target.value;c(t)},type:"text",placeholder:"what's on your mind?",maxLength:120}),Object(O.jsx)("button",{className:"home-screen__form__first-row__submit",type:"submit",onClick:d,children:Object(O.jsx)("i",{className:"fas fa-arrow-right"})})]}),Object(O.jsx)("div",{className:"home-screen__form__second-row",children:Object(O.jsx)("label",{for:"choose-file",className:"",children:Object(O.jsxs)("span",{children:["Add Photos",Object(O.jsx)("i",{className:"fas fa-plus"})]})})}),Object(O.jsx)("input",{id:"choose-file",className:"home-screen__form__choose-file",type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){console.log(e);var t=e.currentTarget.result;j(t)},n.readAsDataURL(t)},style:{visibility:"hidden"}}),u&&Object(O.jsxs)("div",{className:"home-screen__form__imgPrev-contents",children:[Object(O.jsx)("img",{className:"home-screen__form__imgPrev-contents__img",src:u,width:"50px",height:"50px"}),Object(O.jsx)("label",{children:Object(O.jsxs)("span",{className:"home-screen__form__imgPrev-contents__clear",onClick:function(){j("")},children:["Clear",Object(O.jsx)(v.a,{id:"clear",icon:y.b})]})})]})]}),Object(O.jsx)("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.15.3/css/all.css",integrity:"sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk",crossorigin:"anonymous"})]})},C=function(e){var t=e.userObj,n=Object(s.useState)([]),r=Object(i.a)(n,2),a=r[0],c=r[1];return Object(s.useEffect)((function(){f.collection("tweets").orderBy("createdAt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(w.a)({id:e.id},e.data())}));c(t)}))}),[]),Object(O.jsxs)("div",{className:"home-screen",children:[Object(O.jsx)(S,{userObj:t}),Object(O.jsx)("div",{className:"home-screen__tweet-list",children:a.map((function(e){return Object(O.jsx)(N,{tweetObj:e,isOwner:e.creatorId===t.uid},e.id)}))})]})},P=function(e){var t=e.refreshUser,n=e.userObj,r=Object(s.useState)(n.displayName),a=Object(i.a)(r,2),c=a[0],o=a[1],u=Object(l.f)();Object(s.useEffect)((function(){j()}),[]);var j=function(){var e=Object(p.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("tweets").where("creatorId","==",n.uid).orderBy("createdAt").get();case 2:t=e.sent,console.log(t.docs.map((function(e){return e.data()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(p.a)(h.a.mark((function e(s){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),n.displayName===c){e.next=5;break}return e.next=4,n.updateProfile({displayName:c});case 4:t();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"profile",children:[Object(O.jsxs)("form",{className:"profile__form",onSubmit:b,children:[Object(O.jsx)("input",{className:"profile__form__modify",name:"name",value:c,type:"text",placeholder:"Display name",onChange:function(e){var t=e.target.value;o(t)}}),Object(O.jsx)("span",{className:"profile__form__submit",onClick:b,children:"Update Profile"})]}),Object(O.jsx)("div",{className:"profile__hr"}),Object(O.jsx)("span",{className:"profile__log-out",onClick:function(){window.confirm("Seriously?!?!?")&&(d.signOut(),u.push("/"))},children:"Log Out"})]})},A=function(e){var t=e.userObj;return Object(O.jsxs)("nav",{children:[Object(O.jsxs)("ul",{className:"nav",children:[Object(O.jsx)("li",{className:"nav-list",children:Object(O.jsx)(o.b,{to:"/",children:Object(O.jsx)("i",{className:"fab fa-twitter"})})}),Object(O.jsx)("li",{className:"nav-list",children:Object(O.jsxs)(o.b,{to:"/profile",className:"nav-list__profile",children:[Object(O.jsx)("i",{className:"fas fa-user-edit"}),Object(O.jsxs)("span",{children:[t.displayName,"'s Profile"]})]})})]}),Object(O.jsx)("link",{rel:"stylesheet",href:"https://use.fontawesome.com/releases/v5.15.3/css/all.css",integrity:"sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk",crossorigin:"anonymous"})]})},U=function(e){var t=e.refreshUser,n=e.isLoggedIn,s=e.userObj;return Object(O.jsxs)(o.a,{children:[n&&Object(O.jsx)(A,{userObj:s}),Object(O.jsx)(l.c,{children:n?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(l.a,{exact:!0,path:"/",children:Object(O.jsx)(C,{userObj:s})}),Object(O.jsx)(l.a,{exact:!0,path:"/profile",children:Object(O.jsx)(P,{userObj:s,refreshUser:t})})]}):Object(O.jsx)(l.a,{exact:!0,path:"/",children:Object(O.jsx)(g,{})})})]})};var I=function(){var e=Object(s.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(null),c=Object(i.a)(a,2),o=c[0],l=c[1];return Object(s.useEffect)((function(){d.onAuthStateChanged((function(e){l(e?{displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}}:null),r(!0)}))}),[]),Object(O.jsx)(O.Fragment,{children:n?Object(O.jsx)(U,{refreshUser:function(){var e=d.currentUser;l({displayName:e.displayName,uid:e.uid,updateProfile:function(t){return e.updateProfile(t)}})},isLoggedIn:Boolean(o),userObj:o}):"Initializing..."})};c.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(I,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.4ce224fa.chunk.js.map